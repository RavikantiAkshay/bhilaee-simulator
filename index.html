<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Interactive RLC Circuit Simulator - Analyze and simulate electronic circuits with real-time visualization">
    <title>Circuit Simulator | RLC Analysis</title>
    <link rel="stylesheet" href="index.css">
    <script src="config.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
</head>

<body>
    <div id="app">
        <!-- Header -->
        <header class="app-header">
            <div class="logo">
                <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3" />
                    <path
                        d="M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M1 12h4M19 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83" />
                </svg>
                <span class="logo-text">Circuit Simulator</span>
            </div>
            <nav class="header-nav">
                <a href="#" class="btn btn-secondary" id="btn-back-guide" onclick="window.location.href = CONFIG.GUIDE_URL; return false;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5" />
                        <polyline points="12 19 5 12 12 5" />
                    </svg>
                    Back to Guide
                </a>
                <button class="btn btn-secondary" id="btn-new">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                        <polyline points="14 2 14 8 20 8" />
                        <line x1="12" y1="18" x2="12" y2="12" />
                        <line x1="9" y1="15" x2="15" y2="15" />
                    </svg>
                    New
                </button>
                <button class="btn btn-secondary" id="btn-save">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" />
                        <polyline points="17 21 17 13 7 13 7 21" />
                        <polyline points="7 3 7 8 15 8" />
                    </svg>
                    Save
                </button>
                <button class="btn btn-secondary" id="btn-load">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                        <polyline points="17 8 12 3 7 8" />
                        <line x1="12" y1="3" x2="12" y2="15" />
                    </svg>
                    Load
                </button>
            </nav>
        </header>

        <!-- Main Content -->
        <main class="app-main">
            <!-- Toolbar (Component Palette) -->
            <aside class="toolbar" id="toolbar">
                <h2 class="toolbar-title">Components</h2>
                <div class="component-list" id="component-list">
                    <!-- Components will be dynamically populated from registry -->
                </div>
            </aside>

            <!-- Canvas Area -->
            <section class="canvas-container" id="canvas-container">
                <svg class="circuit-canvas" id="circuit-canvas">
                    <!-- Grid pattern -->
                    <defs>
                        <pattern id="grid-small" width="20" height="20" patternUnits="userSpaceOnUse">
                            <path d="M 20 0 L 0 0 0 20" fill="none" stroke="var(--grid-line)" stroke-width="0.5" />
                        </pattern>
                        <pattern id="grid-large" width="100" height="100" patternUnits="userSpaceOnUse">
                            <rect width="100" height="100" fill="url(#grid-small)" />
                            <path d="M 100 0 L 0 0 0 100" fill="none" stroke="var(--grid-line-major)"
                                stroke-width="1" />
                        </pattern>
                    </defs>
                    <rect class="grid-background" width="100%" height="100%" fill="url(#grid-large)" />

                    <!-- Circuit components layer -->
                    <g class="components-layer" id="components-layer"></g>

                    <!-- Wires layer -->
                    <g class="wires-layer" id="wires-layer"></g>

                    <!-- Interaction layer (for drawing wires, selections) -->
                    <g class="interaction-layer" id="interaction-layer"></g>
                </svg>

                <!-- Canvas Controls (Zoom, Pan) -->
                <div class="canvas-controls">
                    <button class="canvas-btn" id="btn-zoom-in" title="Zoom In">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8" />
                            <line x1="21" y1="21" x2="16.65" y2="16.65" />
                            <line x1="11" y1="8" x2="11" y2="14" />
                            <line x1="8" y1="11" x2="14" y2="11" />
                        </svg>
                    </button>
                    <button class="canvas-btn" id="btn-zoom-out" title="Zoom Out">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8" />
                            <line x1="21" y1="21" x2="16.65" y2="16.65" />
                            <line x1="8" y1="11" x2="14" y2="11" />
                        </svg>
                    </button>
                    <button class="canvas-btn" id="btn-zoom-fit" title="Fit to View">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path
                                d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3" />
                        </svg>
                    </button>
                </div>
                <!-- Chart Panel Overlay -->
                <div class="chart-overlay" id="chart-overlay">
                    <div class="chart-header">
                        <span class="chart-title">Waveform</span>
                        <button class="chart-close" id="chart-close">Ã—</button>
                    </div>
                    <div class="chart-container" id="chart-container"></div>
                </div>
            </section>

            <!-- Right Panel (Properties + Output) -->
            <aside class="right-panel">
                <!-- Property Panel -->
                <section class="property-panel collapsible-section" id="property-panel">
                    <h2 class="panel-title collapsible-header" data-target="property-content">
                        <svg class="collapse-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="6 9 12 15 18 9" />
                        </svg>
                        Properties
                    </h2>
                    <div class="collapsible-content" id="property-content">
                        <p class="placeholder-text">Select a component to view properties</p>
                    </div>
                </section>

                <!-- Simulation Controls -->
                <section class="simulation-panel collapsible-section" id="simulation-panel">
                    <h2 class="panel-title collapsible-header" data-target="simulation-content">
                        <svg class="collapse-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="6 9 12 15 18 9" />
                        </svg>
                        Simulation
                    </h2>
                    <div class="collapsible-content" id="simulation-content">
                        <div class="simulation-controls">
                            <div class="control-group">
                                <label for="analysis-type">Analysis Type</label>
                                <select id="analysis-type" class="select-input">
                                    <option value="dc">DC Analysis</option>
                                    <option value="ac">AC Analysis</option>
                                    <option value="transient">Transient</option>
                                </select>
                            </div>
                            <div class="control-group">
                                <label for="sim-time">Simulation Time (s)</label>
                                <input type="number" id="sim-time" class="number-input" value="0.01" min="0.001"
                                    step="0.001">
                            </div>
                            <div class="control-group">
                                <label for="time-step">Time Step (s)</label>
                                <input type="number" id="time-step" class="number-input" value="0.0001" min="0.00001"
                                    step="0.00001">
                            </div>
                            <div class="sim-buttons">
                                <button class="btn btn-primary btn-run" id="btn-run">
                                    <svg viewBox="0 0 24 24" fill="currentColor">
                                        <polygon points="5 3 19 12 5 21 5 3" />
                                    </svg>
                                    Run
                                </button>
                                <button class="btn btn-secondary" id="btn-stop" disabled>
                                    <svg viewBox="0 0 24 24" fill="currentColor">
                                        <rect x="6" y="4" width="4" height="16" />
                                        <rect x="14" y="4" width="4" height="16" />
                                    </svg>
                                    Stop
                                </button>
                                <button class="btn btn-secondary" id="btn-reset">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="1 4 1 10 7 10" />
                                        <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10" />
                                    </svg>
                                    Reset
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Output Panel -->
                <section class="output-panel collapsible-section" id="output-panel">
                    <h2 class="panel-title collapsible-header" data-target="output-content">
                        <svg class="collapse-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="6 9 12 15 18 9" />
                        </svg>
                        Output
                    </h2>
                    <div class="collapsible-content" id="output-content">
                        <p class="placeholder-text">Run simulation to see results</p>
                    </div>
                </section>
            </aside>
        </main>

        <!-- Status Bar -->
        <footer class="status-bar">
            <span class="status-item" id="status-mode">Mode: Edit</span>
            <span class="status-item" id="status-coords">X: 0, Y: 0</span>
            <span class="status-item" id="status-zoom">Zoom: 100%</span>
            <span class="status-item" id="status-components">Components: 0</span>
        </footer>
    </div>

    <!-- Scripts -->
    <script type="module" src="src/main.js"></script>
</body>

</html>